@import 'normalize';
@import 'css3';
@import 'utils';


// BREAKPOINT DEFINITIONS	
/* Breakpoint mixin - wider than most mobiles*/
@mixin if-wider-than-mobile {
	@media (min-width: pxToEm(568)) {
		@content;
	}
}
/* Breakpoint mixin - wide enough for skeleton grid layout to be active */
@mixin if-grid-layout {
	@media (min-width: pxToEm(768)) {
		@content;
	}
}
@mixin if-maximized-grid {
	@media (min-width: pxToEm(960)) {
		@content;
	}
}


// RESOLUTION RETINA WRAPPERS
@mixin unless-retina {
	@include if-max-resolution(1.49) {
		@content;
	}
}
@mixin if-retina {
	@include if-min-resolution(1.5) {
		@content;
	}	
}


// accessible way of hiding text for image replacement
%ir-hide-text {
	position: absolute !important;
  clip: rect(1px 1px 1px 1px); // IE6, IE7
  clip: rect(1px, 1px, 1px, 1px);
}


body {
	font-family: 'Lora', serif;
	color: #5b5b5b;
	background-color: #f6f6f6;
	-webkit-font-smoothing: antialiased; // makes bold thinner, more like in PS
}


/*
 * Sprite settings
 */
$spriteWidth: 225;
$spriteHeight: 350;
@mixin sprite-background-size {
	@include pxToRem(background-size, $spriteWidth, $spriteHeight);
}
@mixin sprite($position) {
	background-position: $position;
	background-repeat: no-repeat;
	@include sprite-background-size;

	@include unless-retina { background-image: url('img/sprite@1x.png'); }
	@include     if-retina { background-image: url('img/sprite@2x.png'); }
}


/*
* Typo base
*/
h1 {
	text-align: center;
	@include pxToRem(font-size, 25);
	font-weight: bold;
}


/*
* Header
*/
body > header {
	// 'mobile' sizes
	$smallHeaderHeight: 40;
	$bigHeaderHeight: 58;

	// 'wider than mobile' sizes
	$smallLogoWidth: 50;
	$bigLogoWidth: 80;

	background-color: #ececec;
	border-bottom: 1px solid #dedede;
 	

 	#logo {
		display: inline-block;
		float: left;
		border-right: 1px dotted #c9c9c9;
		@include box-sizing(border-box);

		// use sprite but scale it down slightly to fit the small header
		@include sprite(11px 5px);
		@include pxToRem(background-size, $spriteWidth * ($smallHeaderHeight / $bigHeaderHeight));

		@include pxToRem(height, $smallHeaderHeight);
		@include pxToRem(width, $smallLogoWidth);

		@include if-wider-than-mobile {
			@include pxToRem(height, $bigHeaderHeight);
		  @include pxToRem(width, $bigLogoWidth);
		  @include pxToRem(background-position, 20, 8);
		  @include sprite-background-size;
		}

		> span {
			@extend %ir-hide-text;
	  }
	}


	nav {
		text-transform: uppercase;
		@include box-sizing(border-box);
		@include pxToRem(font-size, 12);
		@include pxToRem(line-height, $smallHeaderHeight);
		@include pxToRem(margin-left, $smallLogoWidth);

		@include if-wider-than-mobile {
			@include pxToRem(line-height, $bigHeaderHeight);
		  @include pxToRem(margin-left, $bigLogoWidth);
		}

		// switch to smaller font under 280px wide
		@media (max-width: pxToEm(280)) {
			@include pxToRem(font-size, 10);
		}
		
		a {
			width: 33.33%;
			display: inline-block;
			text-align: center;
			text-decoration: none;
			color: #5b5b5b;

			@include box-sizing(border-box);

			& + a {
				border-left: 1px dotted #c9c9c9;
			}  

			&.selected,
			&:hover,
			&:active {
				background: #fff;
			}

			// switch nav links to stack vertically
			@media (max-width: pxToEm(220)) {
				display: block;
				width: auto;
				& + a {
					border-top: 1px dotted #c9c9c9;
				}  
			}
		}

	}
} // header end


/*
 * Footer
 */
body > footer {
	border-top: 1px solid #e1e1e1;
 	@include pxToRem(height, 40);

 	@include if-wider-than-mobile {
 		@include pxToRem(height, 60);
 	}
	
	background: #ececec no-repeat center center;
	@include pxToRem(background-size, 169, 25);

	@include unless-retina { background-image: url('img/footer-anchor@1x.png'); }
	@include     if-retina { background-image: url('img/footer-anchor@2x.png'); }
}


/** 
 * Main content 
 */
#main {
	height: 100%;
	width: 100%;
	@include pxToRem(margin-bottom, 50);
	@include box-sizing(border-box);
	@include clearfix;

	section {
		background: #ececec;
	}
}


/*
 * Home
 */
#home #main {
	text-align: center;
	margin: auto;
	
	@include pxToRem(margin-top, 70);
	@include pxToRem(margin-bottom, 70);
	@include pxToRem(padding, 250, 10, 0, 10);
	@include sprite(center -75px);

	@include pxToRem(max-width, 340);

	h1 {
		@include pxToRem(font-size, 20);
		@include pxToRem(margin, 50, 0, 25);
	}

	blockquote {
		@include pxToRem(padding, 0, 20);
		> footer {
			@include pxToRem(margin-top, 15);
			@include pxToRem(font-size, 12);
			font-style: italic;
		}
	}

	@include if-wider-than-mobile {
		h1 {
			@include pxToRem(font-size, 25);
		}
		@include pxToRem(margin-top, 75);
		@include pxToRem(margin-bottom, 120);
	}
}


/*
* Projects list
*/

#projects {
	h1 {
		color: #908f8f;
		background: #fff;
		@include pxToRem(margin-bottom, 30);
		font-weight: normal;
		@include pxToRem(font-size, 12);
		@include pxToRem(padding, 21, 20);
		@include box-shadow("#fbfbfb 0 1px 0px, #dedede 0 2px 0px");

		@include if-wider-than-mobile {
			@include pxToRem(font-size, 14);
		}
	}

	#main {
		border-top: 1px solid white;
	}

	.columns p + div[data-picture] {
		@include pxToRem(margin-top, 30);
		@include if-grid-layout {
			@include pxToRem(margin-top, 60);
			@include pxToRem(margin-bottom, 40);
		}
	}

	.project-list {
		@include pxToRem(margin, 0, 10);
		
		text-align: center;
		list-style: none;

		%project-item {
			@include pxToRem(width, 280);
			@include pxToRem(height, 240);
		}

		a {
			display: inline-block;

			background-color: #cbcbcb;
			@extend %project-item;
			@include pxToRem(margin, 10);
			
			.overlay {
				opacity: 0;
				visibility: hidden;
				position: absolute;
				@extend %project-item;				
				background: #394066;
				
				h2 {
					display: inline-block;
					@include pxToRem(margin-top, 110);
					@include pxToRem(font-size, 20);

					color: white;
					font-weight: bold;				
				}
			}

			&:hover .overlay {
				display: block;
				opacity: 0.7;
				visibility: visible;

				@include transition(opacity 300ms ease-in);
			} 
		}

		img {
			max-width: 100%;
		}
		
		@media (min-width: pxToEm(620)) {
			@include pxToRem(width, 600);
			margin: 0 auto;
			a {
				float: left;
			}
		}

		@media (min-width: pxToEm(920)) {
			@include pxToRem(width, 900);
		} 
	}
}




/*
* Projects details
*/

#project-details {
	h1 {
		@include pxToRem(font-size, 60);
		letter-spacing: -0.05em;
	}
	h2 {
		@include pxToRem(font-size, 31);
		@include pxToRem(margin-bottom, 15);
		letter-spacing: -0.05em;
	}

	nav.projects-nav {
		background: #fff;
		h1 {
			color: #908f8f;
			@include pxToRem(font-size, 14);
		}
		.wrapper {
			@include pxToRem(padding, 10, 0);
			@include if-wider-than-mobile {
				@include pxToRem(padding, 21, 0);
			}
		}
	}

	section {
		&:nth-child(odd) {
			background: none;
		}
	}

	.project-hero {
		background: #efefef;
		border-top: 1px solid #d8d8d8;
		text-align: center;
		@include pxToRem(padding, 80, 0);
		@include if-grid-layout {
			@include pxToRem(padding, 138, 0);
		}

		img {
			max-width: 100%;
		}

		@include box-shadow("0 0 106px rgba(0, 0, 0, .07) inset");
		@include radial-gradient("center, circle contain, rgba(255,255,255,.5) 0%,rgba(255,255,255,0) 100%");
		// TODO circular gradient
	}

	.project-intro {
		h1 {
			text-align: left;
			@include pxToRem(margin-top, 40);
			@include pxToRem(margin-bottom, 22);
		}
		p {
			@include pxToRem(font-size, 22);
		}
		img {
			@include pxToRem(margin-top, 70);
			@include pxToRem(margin-bottom, 30);;
		}
	}

	.list-item {
		@include pxToRem(min-height, 400);

		/* Skeleton style overrides */
		.columns {
			@include box-sizing(border-box);
		}

		.item-title {
			@include pxToRem(margin-top, 40);
			@include if-grid-layout {
				@include pxToRem(margin-top, 120);
			}
			@include if-maximized-grid {
				@include pxToRem(margin-top, 150);
			}
			margin-bottom: 0;
		}
		.item-image {
			margin: 0;
		}
		.item-text {
			@include pxToRem(margin-bottom, 50);
		}
		&:nth-child(even) {
			@include if-grid-layout {
				.item-title,
				.item-text {
					@include pxToRem(padding-left, 25);
				}
			}
			.item-image {
				float: right;
			}
		}
		&:nth-child(odd) {
			.item-title,
			.item-text {
				@include if-grid-layout {
					@include pxToRem(padding-right, 25);
				}
				float: right;
			}
		}
		
	}

	.columns {
		img {
			max-width: 100%;	
		}
		@include pxToRem(margin-bottom, 20);
		@include if-grid-layout {
			@include pxToRem(margin-bottom, 40);
		}
		&.center {
			text-align: center;
		}
	}
}




/*
*  Last breakpoint - Bigger than 960 grid - lock it down!
*/
@media (min-width: pxToEm(961)) {
	.wrapper {
		@include pxToRem(max-width, 960);
		margin: 0 auto;
	}
	header .wrapper,
	nav.projects-nav .wrapper {
		@include box-sizing(border-box);
		border-left: 1px dotted #c9c9c9;
		border-right: 1px dotted #c9c9c9;
	}
	header nav a {
		width: 33.28%;
	}
}
